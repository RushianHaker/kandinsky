/** Widgets **/


.widget {	
	margin-bottom: $gut;
	&:last-of-type { margin-bottom: 0; }
	
	& > h3, .widget-title {
		margin-bottom: $base;		
		@include header-title(widget);		
	}
	
	.textwidget {		
		p:last-child { margin-bottom: 0; }
		
		h5 {
			@include post-title(small_title);
			margin-bottom: $base;
			&:last-child { margin-bottom :0;}
		}
		
	}
	
	.ghost-button {
		@include ghost-button(14px, $color-link-three, $color-white);
	}
		
	p { //temp		
		margin-bottom: $gut/2;
	}
	
	&.red {
		background: $color-link-three;
		padding: $gut/2;
		color: rgba(255,255,255, 0.98);
		h3, .widget-title, h5 { color: inherit; }
		
		a { color: $color-white; }
		
		.ghost-button {
			margin-top: $base;
			@include ghost-button(16px, $color-white, $color-link-three);
		}
		
		.button  {
			@include button(white);
		}
	}
	
	&.text-center {
		text-align: center;
	}
	
}

.widget_nav_menu, .widget-bottom ul.menu {
	@include nav-text();	
	li { margin-bottom: $base/2; }
	
	.hide-on-large & {
		margin-bottom: 0;
		li {
			display: inline-block;
			margin: 0 18px 9px 0;
		}
	}
}

.donation_cta {
	margin-bottom: $gut*1.5;
	
	h3, .widget-title, h5 { color: inherit; }
	
	h5 {
		@include post-title(small_title);
		margin-bottom: $base;
		&:last-child { margin-bottom :0;}
	}
	
	
}


/** Page builder widgets **/


.tpl-page-fullwidth {
	overflow-x: hidden;
	position: relative;
}

.taxonomy-intro {
	overflow-x: hidden;
	position: relative;
}

//rows and widgets modifiers
.panel-grid {
	.container-extended  { //for string
		@include container-extended();		
	}
	
	.container-narrowed { // for widget in the center
		max-width: 900px;
		margin: 0 auto;
	}
	
	.no-bottom-margin.panel-cell-style .so-panel.widget { //no margin after widget
		margin-bottom: 0 !important;
	}
	
	.content-center { //center widget text
		text-align: center;
	}
	
	.colored-row { //grey row  of normal width
		padding: $gut;
		background: $color-secondary;
	}
	
	.colored-red { //grey row  of normal width
		padding: $gut;
		background: $color-link-three;
		color: $color-white;
		p,h1, h2, h3, h4, h5, h6, li, a {
			color: $color-white;
		}
	}
	
	.back-to-container div[class *= "so-widget-"]{ //widget limited to container width
		max-width: $page_cont;
		margin: 0 auto;
	}
}

.container-extended  {
    @include container-extended();
    padding-top: $gut * 1.8;
    padding-bottom: $gut*1.5;
}

//colored bg
.container-extended-colored {
	@include container-extended();
	background: $color-secondary;
	padding-top: $gut * 2 * 1.33;
	padding-bottom: $gut*1.5;
		
	a {
		color: $color-page-text;
		text-decoration: underline;
		&:hover, &:focus, &:active {
			color: $color-link-three;				
		}
	}	
}

//pictured bg
.container-extended-pictured {
	@include container-extended();
	padding-top: $gut*1.5;
	padding-bottom: $gut*1.5;
		
	.text-white {
		padding: $gut 0;
		
		h2 { color: $color-white; }
		color: $color-white;
		
		a {
			color: $color-white;
			text-decoration: underline;
			
			&:hover, &:focus, &:active {
				background: $color-link-one;				
			}
		}
		
		li:before {
			color: $color-white;
		}
	}
}

//cta
.container-cta {
	border-top: 6px solid $color-text-black;
	border-bottom: 6px solid $color-text-black;
	padding: $base 0;
	text-align: center;
	
	h4 { margin: 0; }
	h4 + p {
		margin-top: $base;
	}
}

.rdc-button,
.button {
	@include button();
}	

//section title
.page-section {

    margin: 2*$base 0;

    &.knd-background-text.text {
        margin: 2*$base/3;
    }
}

.knd-quote {
    font-style: italic;
}

.knd-columns .markup-columns {
    display: flex;
    flex: 0 1 auto;
    justify-content: space-between;
    //flex-wrap: wrap;

    .markup-column:not(:last-of-type) {
        margin-right: $base;
    }
}


.the-content .knd-recommend,
.knd-recommend {
    font-family: Arial, serif !important;
    font-style: italic;
    font-weight: normal !important;
    letter-spacing: normal !important;
    font-size: 14px;
    line-height: 1.45;
    color: #000;
    padding: $base*.5 $base*.75;
    background-color: #f7f7af;
    margin: $base 0;
    text-align: left !important;
}


/* intro section */

//page with cards
.intro-head-image {
    position: relative;
    z-index: 1;
	@include vertical-image-header-fixed();
	@include container-extended();
	
	.tpl-pictured-bg {
	   background-position:none;
	   
	   @include for(medium-screens) {
	       background-position: 150px 25%;
       }
	}
	
	&.text-over-image {
		height: 400px;
        border-bottom: 5px solid $color-border-dark;
	
		@include for(small-screens) {
			height: 440px;
		}
		
		@include for(medium-screens) {
			height: 480px;
		}
		
		@include for(large-screens) {
			height: 580px;
		}

        .tpl-pictured-bg {
            position: relative;
            z-index: 1;

            &:after {
                content: '';
                display: block;
                width: 100%;
                height: 100%;
                z-index: 3;
                position: absolute;
                top: 0;
                left: 0;
                /* Permalink - use to edit and share this gradient: http://colorzilla.com/gradient-editor/#000000+0,000000+100&0.32+0,1+100 */
background: -moz-linear-gradient(top, rgba(0,0,0,0) 10%, rgba(0,0,0,.8) 100%); 
background: -webkit-linear-gradient(top, rgba(0,0,0,0) 10%,rgba(0,0,0,.8) 100%); 
background: linear-gradient(to bottom, rgba(0,0,0,0) 10%,rgba(0,0,0,.8) 100%); 
            }
        }
	}
}

.tpl-pictured-bg {
	width: 100%;
	height: 100%;
	background-color: $color-secondary;
	background-repeat: no-repeat;
	background-size: cover;
	background-position: center top;
}

.intro-head-content {
    z-index: 10;
	.ihc-title {
        @include knd-head-large-text();
        color: $color-white;
	}
	
	.ihc-content:not(.text-over-color) {
		position: relative;
		margin-top: -40px;
		padding-bottom: $base;
	}
		
	p:last-child { margin-bottom: 0;}
	
	.md-4 {
		@include for(medium-screens) { text-align: right; }
		a { @include button();	}
	}
	
	&.has-button {
		.ihc-title {
		}
		.ihc-desc {
		}
	}
	
	&.text-over-image {
		height: 1px;
		
		.ihc-content {

            transform: translateY(-100%);
            width: 47%;
            
            @include for(medium-screens) {
                padding-bottom: $gut*2;
                margin-top: -15px;
                transform: translateY(-100%);
                width: 47%;
            }
    		
            color: $color-white;
            position: relative;
            
			& > a { 
			   display: block;
		    }
		}
		
		.ihc-title {
		    @include knd-head-large-text();
			
			span {
				display: inline-block;
			}
		}
		
		.ihc-desc {
			@include body-text();
			
			line-height: 1.33;
			color: $color-white;
			
			margin-top:$height_gap + 2px;
			
            @include for(medium-screens) {
                line-height: 1.33;
            }
		}
		
		.cta {
            @include button();
            margin-top: $height_gap + 8px;
		}
	}

    &.text-over-color {

        .ihc-content {
            padding: $base;
            margin: 0;

            & > a {
                display: flex;
                flex-direction: column;
                align-items: center;
            }
        }

        .ihc-title {
            padding: 0;
            span {
                color: $color-text;
                display: inline-block;
                padding: 8px 0;
                margin-left: 8px;
            }
        }

        .cta {
            @include button();
            margin: $base 0;
        }

    }
}

.knd-background-text.background {
    @extended .intro-head-image;
}

.knd-background-text.text {
    @extended .intro-head-content;
}

// Button shortcode
.knd-button-section {

    display: flex;
    justify-content: center;
    align-items: center;

    .knd-btn .knd-button {
        @include button();
        margin-top: $base;
    }
}

.homepage-intro .intro-head-content .ihc-content {
	border-bottom: none;	
}

.intro-head-content + .mobile-sharing {
	margin-top: $base - 8px;
}


/* homepage widgets */
.knd-homepage-sidebar {
    padding-top: $gut;
    
    @include for(medium-screens) {
        padding-top: $gut * 1.8;
    }
    
    body.home.plot-public-campaign & {
        background: var(--knd-color-main);
        color: $color-text;
    }
    
}

.knd-archive-sidebar {
    @extend .knd-homepage-sidebar;
    background: $color-bg-light;
    
    padding-top: $gut * 1.2;
}

/* news widget */
.knd-news-widget {
    
    padding: 54px 0px 0px 0px;
    background: $color-bg-light;
    
    body.plot-public-campaign & {
        background: var(--knd-color-third);
    }
    
    h2.section-title {
        @include knd-head-section-text();
        color: $color-text;
    }
    
    .knd-news-widget-body {
        
        padding-bottom: $gut * 1.17;
    }
    
}


/* ourorg widget */
.knd-ourorg-widget {
    display:none;
    @include for(medium-screens) {
        display:block;
    }
    
    text-align:center;
    padding-bottom: $gut * 1.55;
    
    h2 {
        @include knd-head-tiny-text();
        
        body.plot-public-campaign & {
            color: var(--knd-text2-color);
        }
        
        body.plot-fundraising-org & {
            color: var(--knd-color-third);
        }
    }
    
    .knd-whoweare-headlike-text-wrapper {
        padding-top: $gut / (1.33 * 2);

        .knd-whoweare-headlike-text {
            @include knd-head-exlarge-text();
            hyphens: none;
            
        }
    }
}

/* who we are */
.knd-whoweare-section {
    
    padding-bottom: 0px;

    @include for(medium-screens) {
        padding-bottom: $gut*2;
    }
    
    .whoweare-item {
    
        position:relative;
        margin-bottom: 0px;
        padding-bottom: $gut * 1.2;

        @include upto(medium-screens) {
            margin-bottom: $gut;
        }
    
        @include for(medium-screens) {
            text-align:left;
            min-height: none;
        }
        
        h3 {
            @include knd-head-main-text();
            
            body.plot-fundraising-org & {
                color: var(--knd-color-third);
            }
        }
        
        p {
            padding-top: 15px;
            min-height: 76px;
            
            @include for(medium-screens) {
                min-height: 200px;
            }
            
            @include for(large-screens) {
                min-height: 146px;
            }
        }
        
        a {
            @include knd-link-lonely-text();
            display:inline-block;
            color: $color-page-text;
            border-bottom: 4px solid var(--knd-color-main);
            padding: 0px 0px 4px 0px;
            text-decoration:none;
            position:absolute;
            bottom:0px;
            left: 1px;
            
            &:hover {
                text-decoration:none;
                border-color: var(--knd-color-main-dark);
            }
            
            body.plot-public-campaign & {
            
                color: var(--knd-text2-color);
                border-color: var(--knd-text2-color);
                
                &:hover {
                    color: var(--knd-text2-color-dark);
                    border-color: var(--knd-text2-color-dark);
                }
            }
            
            body.plot-fundraising-org & {
            
                color: var(--knd-color-third);
                border-color: var(--knd-color-third);
                
                &:hover {
                    color: var(--knd-color-third-dark);
                    border-color: var(--knd-color-third-dark);
                }
            }
            
        }
    }
    
    .whoweare-item:last-of-type {
    
        h3 {
        
            body.plot-public-campaign & {
                color: var(--knd-text3-color);
            }
            
            body.plot-fundraising-org & {
                color: var(--knd-color-main);
            }
        }
    
        a {
            border-color: var(--knd-color-second);
            &:hover {
                border-color: var(--knd-color-second-dark);
            }
            
            body.plot-public-campaign & {
            
                color: var(--knd-text3-color);
                border-color: var(--knd-text3-color);
                
                &:hover {
                    color: var(--knd-text3-color-dark);
                    border-color: var(--knd-text3-color-dark);
                }
            }
            
            body.plot-fundraising-org & {
            
                color: var(--knd-color-main);
                border-color: var(--knd-color-main);
                
                &:hover {
                    color: var(--knd-color-main-dark);
                    border-color: var(--knd-color-main-dark);
                }
            }
        }
    }
}

/* join us bar */
.knd-joinus-widget {
    
    display:block;
    
    @extend .knd-ourorg-widget;
    background: var(--knd-color-second);
    padding-top: $gut * 1.22;
    padding-bottom: $gut * 1.35;
    
    color: $color-text;
     
    h2 {
        letter-spacing: 0.1em;
        
        body.plot-public-campaign & {
            color: $color_text;
        }
        
        body.plot-fundraising-org & {
            color: $color_text_white;
        }
    }
    
    .knd-whoweare-headlike-text-wrapper {
        justify-content: center;
        
        .knd-whoweare-headlike-text {
            line-height: 1.33;
            hyphens: none;
            
            body.plot-public-campaign & {
                color: $color_text;
            }
            
            body.plot-fundraising-org & {
                color: $color_text_white;
            }
            
        }
    }
    
    .knd-cta-wrapper-wide {
        padding-top: 24px;
        
        a.cta {
            @include button();
            @include knd-button-bigcaption-text();
            padding: 16px 50px;
        }
    }
}

/* projects */
.knd-projects-widget {
    @extend .knd-news-widget;
    background: var(--knd-color-third);
    
    body.plot-public-campaign & {
        background: var(--knd-color-third);
    }
    
    h2.section-title {
        color: $color-white;
    }
    
    .section-links {
        display: flex;
        justify-content: flex-start;
        border-bottom: 1px solid $color-border-dark;
        padding-bottom: 15px;
        
        padding-top: 10px;
        @include for(medium-screens) {
            justify-content: flex-end;
            transform: translateY(-55%);
            padding-top: 0px;
        }
        
        a {
            @include knd-link-section-text();
            color: var(--knd-color-main-dark);
            
            margin-right: 20px;
            @include for(medium-screens) {
                margin-left: 44px;
                margin-right: 0px;
            }
            
            &:hover, &:focus, &:active {
                color: var(--knd-color-main);
            }
            
            body.plot-fundraising-org & {
                color: $color_text_white;
            }
            
        }
        
        body.plot-fundraising-org & {
            border-color: $color-border-light;
        }
        
    }
    
    .knd-news-widget-body {
        padding-bottom: 2px;
    }
}

/* partners */
.knd-partners-widget {
    @extend .knd-news-widget;
    padding-top: 56px;
    
    //background: $color-white;
    background: $color-page-bg;
    
    body.plot-public-campaign & {
        background: $color-white;
        
        h2.section-title {
            color: var(--knd-color-third);
        }
    }
    
    h2.section-title {
        color: $color-page-text;
    }
    
    .knd-news-widget-body {
        padding-top: 33px;
    }

    .tpl-org img {
        max-width: 180px;
        
        @include for(medium-screens) {
            max-width: 100%;
        }
    }
    
}

/* donations */
.knd-donations-widget {
    @extend .knd-news-widget;
    background: $color-page-bg;
    padding-top: $gut/2; 
    
    .widget-full-title {
        text-align:center;
    }
     
    padding-top: $gut*.7;

    .tpl-post {
        border: 1px solid $color-page-bg-dark;
        padding: $gut*.5 $gut*.54;
        
        @include for(small-screens) {
            padding: $gut * 1.08 $gut;
        }

        @include for(medium-screens) {
            padding: $gut*.5 $gut*.54;
        }

        @include for(large-screens) {
            padding: $gut * 1.08 $gut;
        }
        
        .help-purpose {
            @include knd-link-donation-purpose();
            color: var(--knd-color-main-dark);
            padding-top: $gut / 2;
        }
        
        .lk-title {
            @include knd-head-main-text();
            padding-top: $gut / 2.1;
            padding-bottom: 7px;
        }
        
        p {
            @include knd-card-text();
            padding-bottom: $gut * 1.6;
        }
        
        .leyka-scale-scale {
            width: 100%;
            height: 7px;
            
            .target {
                height: inherit;
                background: $color-border-link;
                
                .collected {
                    height: inherit;
                    background: var(--knd-color-main);
                }
            }
        }
        
        .leyka-scale-label {
            @include knd-link-related-text();
            color: $color-page-text-light;
            
            .caption {
                @include knd-link-donation-purpose();
                padding-top: $gut / 3.8;
            }
            
            .sum {
                color: var(--knd-color-main);
            }
            
            .knd-campaign-needed .sum {
                color: $color-page-text;
            }
            
        }
        
        .leyka-scale-button-alone {
            text-align:right;
        }
        
        .leyka-scale-button-alone {
            a {
                @include button();
                @include knd-leyka-button-caption-text();
                margin-top:$gut / 1.4;
                
            }
        }
        
    }
    
}